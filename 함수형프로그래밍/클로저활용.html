<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>클로저 활용</title>
</head>
<body>
  <script>
    //카운트 상태 변수
    let num = 0;
    //카운트 상태 변경 함수
    const increase = function(){
      //카운트 상태를 1만큼 증가
      return ++num;
    }
    console.log(increase());  //1
    console.log(increase());  //2
    console.log(increase());  //3


    //함수형 프로그래밍에서 클로저를 활용하는 예제
    //함수를 반환하는 고차 함수
    
    //(function(){}()) = 즉시 실행함수, 함수생성과 동시에 호출되는 함순
    const counter = (function(){
      //카운트 상태를 유지하기 위한 자유 변수
      let counter = 0;

      //함수를 인수로 전달받은 클로저를 반환
      return function(aux){
        //인수로 전달받은 보조 함수에 상태 변경을 위임인다.      }
        counter = aux(counter);
        return counter;
      }
    }());

    //보조함수
    function increase1(n){
      return ++n; //인자로 전달받은 매개변수n을 1증가시켜 리턴
    }
    //보조함수
    function decrease1(n){
      return --n; //인자로 전달받은 매개변수n을 1감소시켜 리턴
    }

    //증가
    console.log(counter(increase1));  //1
    console.log(counter(increase1));  //2
    console.log(counter(increase1));  //3
    console.log(counter(increase1));  //4
    //감소
    console.log(counter(decrease1));  //3
    console.log(counter(decrease1));  //2
  </script>
</body>
</html>